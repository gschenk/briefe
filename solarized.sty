%defines a colour theme for easy screen reading
\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{solarized}
  [2012/04/03 own frequently used definitons]
\RequirePackage{xcolor,etoolbox,ifthen}

\newif\ifsolarized
\newif\ifsoldark
\newif\ifsollight

\DeclareOption{dark}{%
  \solarizedtrue
  \soldarktrue
  \sollightfalse
}

\DeclareOption{light}{%
  \solarizedtrue
  \sollighttrue
  \soldarkfalse
}

\DeclareOption{no-solarized}{%
  \solarizedfalse
  \soldarkfalse
  \sollightfalse
}

% default option
\ExecuteOptions{no-solarized}

\ProcessOptions

\definecolor{base03}{HTML}{002B36}
\definecolor{base02}{HTML}{073642}
\definecolor{base01}{HTML}{586E75}
\definecolor{base00}{HTML}{657B83}
\definecolor{base0}{HTML}{839496}
\definecolor{base1}{HTML}{93A1A1}
\definecolor{base2}{HTML}{EEE8D5}
\definecolor{base3}{HTML}{FDF6E3}
\definecolor{yellow}{HTML}{B58900}
\definecolor{orange}{HTML}{CB4B16}
\definecolor{red}{HTML}{DC322F}
\definecolor{magenta}{HTML}{D33682}
\definecolor{violet}{HTML}{6C71C4}
\definecolor{blue}{HTML}{268BD2}
\definecolor{cyan}{HTML}{2AA198}
\definecolor{green}{HTML}{859900}


\ifsolarized
  \let\reftagform@=\tagform@
\fi


%% dark theme
\ifsoldark
  \pagecolor{base03}
  \color{base0}
  \AtBeginEnvironment{itemize}{\color{base01}}
  \AtBeginEnvironment{equation}{\color{yellow}}
  \everymath{\color{yellow}}

  % highlight text shapes
  \DeclareTextFontCommand{\textit}{\color{base2}\itshape}
  \DeclareTextFontCommand{\textbf}{\color{base1}\bfseries}
  \DeclareTextFontCommand{\textsc}{\color{green}\scshape}
  \DeclareTextFontCommand{\texttt}{\color{blue}\ttfamily}

  \def\tagform@#1{\maketag@@@{%
    (\ignorespaces\textcolor{base0}{#1}%
    \unskip\@@italiccorr)
  }}

  % light background for floats
  \RequirePackage{floatrow}
  \DeclareColorBox{shaded}{\colorbox{base02}}
  \floatsetup{%
    framestyle=colorbox,%
    colorframeset=shaded,%
    framefit=yes,%
    heightadjust=all,%
    framearound=all%
  }
  \DeclareCaptionFont{label}{\color{cyan}}
  \DeclareCaptionFont{text}{\color{base1}}
  \captionsetup{%
    labelfont=label,%
    textfont=text%
  }
\fi

%% light theme
\ifsollight
  \pagecolor{base3}
  \color{base00}
  \AtBeginEnvironment{itemize}{\color{base1}}
  \AtBeginEnvironment{equation}{\color{orange}}
  \everymath{\color{orange}}

  \DeclareTextFontCommand{\textit}{\color{base02}\itshape}
  \DeclareTextFontCommand{\textbf}{\color{base01}\bfseries}
  \DeclareTextFontCommand{\textsc}{\color{cyan}\scshape}
  \DeclareTextFontCommand{\texttt}{\color{orange}\ttfamily}

  \def\tagform@#1{\maketag@@@{%
    (\ignorespaces\textcolor{base00}{#1}%
    \unskip\@@italiccorr)
  }}
\fi


%% colour puncuation glyphs

% following the method by David Carlisle at
% http://tex.stackexchange.com/a/213427/82099

  \def\zz#1{\textcolor{color#1}{#1}}

  % define colours for punctuation marks
  \colorlet{color.}{blue}
  \colorlet{color,}{orange}
  \colorlet{color:}{cyan}
  \colorlet{color;}{red}
  \colorlet{color?}{violet}
  \colorlet{color!}{green}
  \colorlet{color'}{magenta}

\ifsolarized
  \RequirePackage{xparse,l3regex}
  \ExplSyntaxOn
  \NewDocumentCommand{\coloursyn}{ m  }
  {
    \coloursyn:nn { #1  }
  }

  %defining a new tocken list
  \tl_new:N \l_syn_tl
  \cs_new_protected:Npn \coloursyn:nn #1
  {
    %setting l_syn_tl to the string-argument
    \tl_set:Nn \l_syn_tl { #1  }
      %Coloring A and a by replacing them in
      % the string and overriding l_syn_tl with
      % the new string
        \regex_replace_all:nnN { ([\.,;:?!'])  } { \c{zz}\cB\{\1\cE\}  } \l_syn_tl
           %Using \l_syn_tl as output
           \tl_use:N \l_syn_tl

  }
  \ExplSyntaxOff

\else
  % provide effectless command
  \providecommand{\coloursyn}[1]{#1}
\fi
%common



% vim: ai syntax=tex expandtab shiftwidth=2 softtabstop=2 :
